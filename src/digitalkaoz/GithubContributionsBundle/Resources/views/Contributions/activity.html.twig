<link rel="stylesheet" href="/js/libs/cal-heatmap/cal-heatmap.css" />
<script type="text/javascript" src="/js/libs/d3/d3.min.js"></script>
<script type="text/javascript" src="/js/libs/cal-heatmap/cal-heatmap.min.js"></script>

<div class="row">
    <button class="btn btn-default" id="cal-heatmap-prev"><span class="glyphicon glyphicon-arrow-left"></span></button> <button id="cal-heatmap-next" class="btn btn-default"><span class="glyphicon glyphicon-arrow-right"></span></button>
    <div id="cal-heatmap" class="col-md-12"></div>
</div>

<script type="text/javascript">
    //http://kamisama.github.io/cal-heatmap
    //TODO calculate min-data from the data
    var cal = new CalHeatMap();
    cal.init({
        itemName: ["contribution", "contributions"],
        start:  new Date(new Date().setMonth(new Date().getMonth()-12)),
        maxDate: new Date(),
        minDate: new Date(2012, 9),
        range: 13,
        domainLabelFormat: "%m-%Y",
        domainMargin: [10,0,10,0],
        legend: [1, 2, 3, 5],
        legendColors: {
            min: "#efefef",
            max: "steelblue",
            base : "#efefef",
            empty: "#efefef"
        },
        legendVerticalPosition: "bottom",
        legendHorizontalPosition: "right",
        legendOrientation: "horizontal",
        domain: "month",
        subDomain: "day",
        data : {{data|raw}},
        previousSelector: "#cal-heatmap-prev",
        nextSelector: "#cal-heatmap-next"
    });
</script>